<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Портал "Смарт Линк"</title>
    <style>
        .imglogo {
            max-width: 100%;
            max-height: 100%;
        }

    </style>
    <!-- Webix Library -->
    <script type="text/javascript" src="libs/webix/webix.js"></script>
    <script type="text/javascript" src="libs/webix/i18n/ru.js"></script>
    <link rel="stylesheet" href="libs/webix/webix.css">
    <link rel="stylesheet" href="libs/webix/skins/compact.css">

    <script type="text/javascript" charset="utf-8">


        webix.ready(function () {
            if (webix.CustomScroll && !webix.env.touch) webix.CustomScroll.init();

            function buttonHandler() {
                var numberRecords = $$("counterID").getValue();
                $$("zsi_pos_table").define("yCount",numberRecords);
                $$("zsi_pos_table").define("datafetch",numberRecords);
                $$("zsi_pos_table").define("loadahead",numberRecords*2);
                $$("zsi_pos_table").clearAll();
                var xhttp = new XMLHttpRequest();
                xhttp.open("GET", "/changeDefault?count="+numberRecords, true);
                xhttp.send();
                $$("zsi_pos_table").define("url","users");
            }

            var grid = {
                id: "zsi_pos_table",
                container: "zsi_pos",
                view: "datatable", select: true, editable: true, editaction: "dblclick",
                scrollX: true,
                scrollY: true,
                minWidth: 500,
                minHeight: 300,
                columns: [
					{
					    id: "zsi_pos_id",
					    header: ["zsi_pos_id", {content: "serverFilter"}],
					    sort: "server",
					    minWidth: 250,
					    fillspace: 1
					},
					{
					    id: "zsi_transdata_id",
					    header: ["zsi_transdata_id", {content: "serverFilter"}],
					    sort: "server",
					    minWidth: 250,
					    fillspace: 1
					},
					{
					    id: "ad_client_id",
					    header: ["ad_client_id", {content: "serverFilter"}],
					    sort: "server",
					    minWidth: 250,
					    fillspace: 1
					},
					{
					    id: "ad_org_id",
					    header: ["ad_org_id", {content: "serverFilter"}],
					    sort: "server",
					    minWidth: 70,
					    fillspace: 1
					},
					{
					    id: "isactive",
					    header: ["isactive", {content: "serverFilter"}],
					    sort: "server",
					    minWidth: 60,
					    fillspace: 1
					},
					{
					    id: "created",
					    header: ["created", {content: "serverFilter"}],
					    sort: "server",
					    minWidth: 200,
					    fillspace: 1
					},
					{
					    id: "createdby",
					    header: ["createdby", {content: "serverFilter"}],
					    sort: "server",
					    minWidth: 70,
					    fillspace: 1
					},
					{
					    id: "updated",
					    header: ["updated", {content: "serverFilter"}],
					    sort: "server",
					    minWidth: 200,
					    fillspace: 1
					},
					{
					    id: "updatedby",
					    header: ["updatedby", {content: "serverFilter"}],
					    sort: "server",
					    minWidth: 70,
					    fillspace: 1
					},
                    {
                        id: "p_poscode",
                        header: ["p_poscode", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 70,
                        fillspace: 1
                    },
                    {
                        id: "p_name",
                        header: ["p_name", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 350,
                        fillspace: 1
                    },
                    {
                        id: "p_code",
                        header: ["p_code", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 70,
                        fillspace: 1
                    },
                    {
                        id: "p_inn",
                        header: ["p_inn", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 110,
                        fillspace: 1
                    },
                    {
                        id: "p_addr",
                        header: ["p_addr", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 500,
                        fillspace: 1
                    },
                    {
                        id: "p_deliveryaddr",
                        header: ["p_deliveryaddr", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 500,
                        fillspace: 1
                    },
                    {
                        id: "p_sign",
                        header: ["p_sign", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 250,
                        fillspace: 1
                    },
                    {
                        id: "p_posaddr",
                        header: ["p_posaddr", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 500,
                        fillspace: 1
                    },
                    {
                        id: "p_latitude",
                        header: ["p_latitude", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 70,
                        fillspace: 1
                    },
                    {
                        id: "p_longitude",
                        header: ["p_longitude", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 70,
                        fillspace: 1
                    },
                    {
                        id: "p_comment",
                        header: ["p_comment", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 70,
                        fillspace: 1
                    },
                    {
                        id: "p_enriched_ts",
                        header: ["p_enriched_ts", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 200,
                        fillspace: 1
                    },
                    {
                        id: "p_enriched",
                        header: ["p_enriched", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 70,
                        fillspace: 1
                    },
                    {
                        id: "p_region",
                        header: ["p_region", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 70,
                        fillspace: 1
                    },
                    {
                        id: "p_company_short",
                        header: ["p_company_short", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 250,
                        fillspace: 1
                    },
                    {
                        id: "latitude",
                        header: ["latitude", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 100,
                        fillspace: 1
                    },
                    {
                        id: "longitude",
                        header: ["longitude", {content: "serverFilter"}],
                        sort: "server",
                        minWidth: 100,
                        fillspace: 1
                    }
                ],
                url: "users",
                datatype: "json",
                yCount:15,

                ready: function () {
                    webix.extend(this, webix.ProgressBar);
                },

                datafetch:15,
                datathrottle: 250,
                loadahead:30,

            };


            var counter = {
                id: "counterID",
                view: "counter",
                label:"Показывать по: ",
                labelWidth: 125,
                step:1,
                value:15,
                min:10,
                max:100,
            };

            var buttonView = {
                view:"button",
                id: "buttonID",
                label:"Подтвердить!",
                width:125,
                click:buttonHandler
            };

            var flex = {
                margin: 10, padding: 0, type: "wide",
                rows: [
                    {
                        cols: [
                            counter,buttonView
                        ]
                    },
                ]
            };

            var flex2 = {
                margin: 10, padding: 0, type: "wide",
                rows: [
                    flex, grid
                ]
            };

            webix.ui({
                rows: [
                    {
                        cols: [
                            flex2
                        ]
                    },
                ]
            });

            webix.ui.fullScreen();

        });


    </script>

    <!-- Development only -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.7.2/less.min.js" ></script>
</head>
<body></body>
</html>